package com.letu.healthplatform.platformmanage.sys.service.impl;import java.util.Arrays;import java.util.HashMap;import java.util.List;import java.util.Map;import org.apache.commons.lang3.StringUtils;import org.apache.log4j.LogManager;import org.apache.log4j.Logger;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import org.springframework.transaction.annotation.Isolation;import org.springframework.transaction.annotation.Propagation;import org.springframework.transaction.annotation.Transactional;import com.github.pagehelper.PageHelper;import com.github.pagehelper.PageInfo;import com.letu.healthplatform.platformmanage.common.code.Constants;import com.letu.healthplatform.platformmanage.common.util.Rsp;import com.letu.healthplatform.platformmanage.sys.mapper.RoleMapper;import com.letu.healthplatform.platformmanage.sys.model.Department;import com.letu.healthplatform.platformmanage.sys.model.Role;import com.letu.healthplatform.platformmanage.sys.service.RoleService;import com.letu.healthplatform.platformmanage.sys.vo.HospitalDepartment;@Service@Transactional(propagation = Propagation.REQUIRED,isolation = Isolation.DEFAULT,timeout=36000,rollbackFor={RuntimeException.class, Exception.class})public class RoleServiceImpl  implements RoleService {    private static final Logger log = LogManager.getLogger(RoleServiceImpl.class);    @Autowired     private RoleMapper roleMapper;	/* (non-Javadoc)	 * @see com.letu.healthplatform.platformmanage.sys.service.RoleService#findRolePage(com.letu.healthplatform.platformmanage.sys.model.Role, int, int)	 */	@Override	public Object findRolePage(Role role, int page, int pageSize) {		List<Role> list=null;		try{			if(page>0&&pageSize>0)		    PageHelper.startPage(page, pageSize);		    list=roleMapper.selectByParam(role);		    if(page>0&&pageSize>0){		    	 return new PageInfo<>(list);		    }		}catch (Exception e) {			e.printStackTrace();			log.error(Constants.ERROR_FIND, e);		}		return Rsp.succ(Constants.SUCCESS_FIND, list);	}	/* (non-Javadoc)	 * @see com.letu.healthplatform.platformmanage.sys.service.RoleService#deleteByPrimaryKey(java.lang.String)	 */	@Override	public Object deleteByPrimaryKey(String tIds) {		int a=0;		if(StringUtils.isBlank(tIds)){			return Rsp.fail(Constants.DEFAULT_KEY_ISNULL);		}		try{			a = roleMapper.deleteByPrimaryKey(tIds.split(","));			return Rsp.succ(Constants.SUCCESS_DELETE);		}catch (Exception e) {			e.printStackTrace();			log.error(Constants.ERROR_DELETE, e);			return Rsp.fail(Constants.ERROR_DELETE);		}	}	/* (non-Javadoc)	 * @see com.letu.healthplatform.platformmanage.sys.service.RoleService#insertSelective(com.letu.healthplatform.platformmanage.sys.model.Department)	 */	@Override	public Object insertSelective(Role record) {		try{			int a = roleMapper.insertSelective(record);			 return Rsp.succ(Constants.SUCCESS_INSERT);		}catch (Exception e) {			e.printStackTrace();			log.error(Constants.ERROR_INSERT, e);			return Rsp.fail(Constants.ERROR_INSERT);		}	}	/* (non-Javadoc)	 * @see com.letu.healthplatform.platformmanage.sys.service.RoleService#findRole(java.lang.String)	 */	@Override	public Object findRole(String tId) {		Role  role = null;		if(StringUtils.isBlank(tId)){			return Rsp.fail(Constants.DEFAULT_KEY_ISNULL);		}		try{			role =roleMapper.selectByPrimaryKey(Integer.valueOf(tId));		}catch (Exception e) {			e.printStackTrace();			log.error(Constants.ERROR_FIND, e);		}		return Rsp.succ(Constants.SUCCESS_FIND,role);	}	/* (non-Javadoc)	 * @see com.letu.healthplatform.platformmanage.sys.service.RoleService#updateByPrimaryKeySelective(com.letu.healthplatform.platformmanage.sys.model.Role)	 */	@Override	public Object updateByPrimaryKeySelective(Role record) {		int a =0;		try{			 a = roleMapper.updateByPrimaryKeySelective(record);			 if(a>0) return Rsp.succ(Constants.SUCCESS_UPDATE);		}catch (Exception e) {		    e.printStackTrace();		    log.error(Constants.ERROR_UPDATE,e);		    return Rsp.fail(Constants.ERROR_UPDATE);		}		return Rsp.fail(Constants.ERROR_UPDATE);	}	/* (non-Javadoc)	 * @see com.letu.healthplatform.platformmanage.sys.service.RoleService#updateByStatus(java.lang.String, java.lang.String)	 */	public Object updateByStatus(String tStatus, String tIds) {		int a =0;		Map<String, Object> params =new HashMap<String, Object>();		try {			params.put("tStatus", tStatus);			List<String> list = Arrays.asList(tIds.split(","));			params.put("list", list);			 a = roleMapper.updateByStatus(params);			 if(a>0) return Rsp.succ(Constants.SUCCESS_UPDATE);		}catch (Exception e) {		    e.printStackTrace();		    log.error(Constants.ERROR_UPDATE,e);		    return Rsp.fail(Constants.ERROR_UPDATE);		}		return Rsp.fail(Constants.ERROR_UPDATE);	}    }